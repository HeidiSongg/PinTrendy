{"ast":null,"code":"const GET_COMMENTS_PIN = \"pins/getCommentsByPinId\";\nconst ADD_COMMENT = \"pins/addComment\";\nconst EDIT_COMMENT = \"pins/editComment\";\nconst DELETE_COMMENT = \"pins/deleteComment\";\nconst getCommentsByPinId = comments => {\n  return {\n    type: GET_COMMENTS_PIN,\n    comments\n  };\n};\nconst addComment = comment => {\n  return {\n    type: ADD_COMMENT,\n    comment\n  };\n};\nconst editComment = comment => {\n  return {\n    type: EDIT_COMMENT,\n    comment\n  };\n};\nconst deleteComment = comment => {\n  return {\n    type: DELETE_COMMENT,\n    comment\n  };\n};\nexport const allCommentsByPinIdThunk = pinId => async dispatch => {\n  const res = await fetch(`/api/pins/${pinId}/comments`);\n  const data = await res.json();\n  dispatch(getCommentsByPinId(data.comments));\n  return res;\n};\nexport const makeCommentThunk = (pinId, comment) => async dispatch => {\n  const res = await fetch(`/api/pins/${pinId}/comments`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(comment)\n  });\n  if (res.ok) {\n    const newComment = await res.json();\n    dispatch(addComment(newComment));\n    return newComment;\n  } else if (res.status < 500) {\n    const data = await res.json();\n    if (data.errors) {\n      return data.errors;\n    }\n  } else {\n    return [\"An error occurred. Please try again.\"];\n  }\n};\nexport const editCommentThunk = comment => async dispatch => {\n  const res = await fetch(`/api/pins/${comment.pinId}/reviews/${review.reviewId}`, {\n    method: \"PUT\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify(review)\n  });\n  if (res.ok) {\n    const editedReview = await res.json();\n    dispatch(editReview(editedReview));\n    return editedReview;\n  }\n};\nexport const deleteReviewThunk = (productId, review) => async dispatch => {\n  const response = await fetch(`/api/products/${productId}/reviews/${review.id}`, {\n    method: \"DELETE\"\n  });\n  if (response.ok) {\n    dispatch(deleteReview(review));\n  }\n};\nconst initialState = {};\nconst commentReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case GET_COMMENTS_PIN:\n      let newState = {};\n      action.comments.forEach(comment => {\n        newState[comment.id] = comment;\n      });\n      return newState;\n    case ADD_COMMENT:\n      let newAddCommentState = {};\n      newAddCommentState[action.comment.id] = action.comment;\n      return newAddCommentState;\n    default:\n      return state;\n  }\n};\nexport default commentReducer;","map":{"version":3,"names":["GET_COMMENTS_PIN","ADD_COMMENT","EDIT_COMMENT","DELETE_COMMENT","getCommentsByPinId","comments","type","addComment","comment","editComment","deleteComment","allCommentsByPinIdThunk","pinId","dispatch","res","fetch","data","json","makeCommentThunk","method","headers","body","JSON","stringify","ok","newComment","status","errors","editCommentThunk","review","reviewId","editedReview","editReview","deleteReviewThunk","productId","response","id","deleteReview","initialState","commentReducer","state","action","newState","forEach","newAddCommentState"],"sources":["/Users/heidisong/Desktop/App_Academy/Project/PinTrendy/react-app/src/store/comment.js"],"sourcesContent":["const GET_COMMENTS_PIN = \"pins/getCommentsByPinId\";\nconst ADD_COMMENT = \"pins/addComment\";\nconst EDIT_COMMENT = \"pins/editComment\";\nconst DELETE_COMMENT = \"pins/deleteComment\";\n\nconst getCommentsByPinId = (comments) => {\n    return {\n      type: GET_COMMENTS_PIN,\n      comments,\n    };\n  };\n\n  const addComment = (comment) => {\n    return {\n      type: ADD_COMMENT,\n      comment,\n    };\n  };\n\n  const editComment = (comment) => {\n    return {\n      type: EDIT_COMMENT,\n      comment,\n    };\n  };\n  \n  const deleteComment = (comment) => {\n    return {\n      type: DELETE_COMMENT,\n      comment,\n    };\n  };\n  \n  export const allCommentsByPinIdThunk = (pinId) => async (dispatch) => {\n    const res = await fetch(`/api/pins/${pinId}/comments`);\n    const data = await res.json();\n    dispatch(getCommentsByPinId(data.comments));\n    return res;\n  };\n\n  export const makeCommentThunk = (pinId, comment) => async (dispatch) => {\n    const res = await fetch(`/api/pins/${pinId}/comments`, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(comment)\n    });\n\n    if (res.ok) {\n        const newComment = await res.json();\n        dispatch(addComment(newComment));\n        return newComment;\n    } else if (res.status < 500) {\n      const data = await res.json();\n      if (data.errors) {\n        return data.errors;\n      }\n    } else {\n      return [\"An error occurred. Please try again.\"];\n    }\n};\n\nexport const editCommentThunk = (comment) => async (dispatch) => {\n    const res = await fetch(`/api/pins/${comment.pinId}/reviews/${review.reviewId}`, {\n      method: \"PUT\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify(review),\n    });\n  \n    if (res.ok) {\n      const editedReview = await res.json();\n      dispatch(editReview(editedReview));\n      return editedReview;\n    }\n  };\n  \n  export const deleteReviewThunk = (productId, review) => async (dispatch) => {\n    const response = await fetch(`/api/products/${productId}/reviews/${review.id}`, {\n      method: \"DELETE\",\n    });\n  \n    if (response.ok) {\n      dispatch(deleteReview(review));\n    }\n  };\n\n  const initialState = {};\n\n  const commentReducer = (state = initialState, action) => {\n    switch (action.type) {\n      case GET_COMMENTS_PIN:\n        let newState = {};\n        action.comments.forEach((comment) => {\n          newState[comment.id] = comment;\n        });\n        return newState;\n        case ADD_COMMENT:\n            let newAddCommentState = {};\n            newAddCommentState[action.comment.id] = action.comment;\n            return newAddCommentState;\n      default:\n        return state;\n    }\n  };\n  \n  export default commentReducer;\n  "],"mappings":"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"},"metadata":{},"sourceType":"module"}